# 地图视野管理库

该模块用于管理房间的视野数据（类型为 `LibRoomDetail`）。

由于需要在房间没有视野时也能访问，所以不能挂载到 room 原型上。并且虽然这些数据允许丢失，但是比较亏，所以会在 DelayQueue 模块的帮助下将其存放在 RawMemory 中。

## 工作流程

在全局重置时从 rawMemory 加载数据并在全局初始化访问实例。在 tick 结束时保存新数据到 rawMemory。

其他时候被动响应其他模块的请求（获取视野数据或者记录房间），不同房间的视野数据会被压缩，并等到实际访问时再进行懒加载。

## 文件介绍

**`library.ts`**

封装了用于和 `RawMemory` 交互（读取数据进行初始化、将数据保存进去）的延迟任务。

**`controller.ts`**

定义了外界模块进行调用的接口。

**`compression.ts`**

封装了视野数据的压缩和解压操作。